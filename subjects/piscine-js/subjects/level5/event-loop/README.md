# –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π (Event loop)

–ò –≤—Å–µ-—Ç–∞–∫–∏: –∫–∞–∫ JavaScript –º–æ–∂–µ—Ç –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∏ –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–º?

–î–ª—è –Ω–∞—á–∞–ª–∞, `setTimeout()` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é JavaScript-–¥–≤–∏–∂–∫–∞, —ç—Ç–æ –ø–æ —Å—É—Ç–∏ Web API, –≤–∫–ª—é—á—ë–Ω–Ω–æ–µ –≤ —Å—Ä–µ–¥—É –±—Ä–∞—É–∑–µ—Ä–∞ –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. üòÆ

–≠—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (Web API) –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è —Ä–∞–±–æ—Ç—É —Å —Ç–∞–π–º–µ—Ä–∞–º–∏, –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ —Å–æ–±—ã—Ç–∏–π. –¢–æ –µ—Å—Ç—å, –∫–æ–≥–¥–∞ –º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Äî –æ–Ω –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Web API. –ò–º–µ–Ω–Ω–æ –æ–Ω–æ –∑–Ω–∞–µ—Ç, –∫–æ–≥–¥–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º, –∫–∞–∫ –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ Web API, –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è **—Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π (Event loop)**.

–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á –∏–∑ –æ—á–µ—Ä–µ–¥–∏.

–ò–º–µ–Ω–Ω–æ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–µ–Ω –∑–∞ —Ç–æ, —á—Ç–æ `setTimeout()` –ø—Ä–æ–ø–∞–ª –∏–∑ —Å—Ç–µ–∫–∞ –≤ –ø—Ä–æ—à–ª–æ–º –ø—Ä–∏–º–µ—Ä–µ. –ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–∞—Ä—Ç–∏–Ω—É —Ü–µ–ª–∏–∫–æ–º, –¥–∞–≤–∞–π—Ç–µ –≤–∫–ª—é—á–∏–º –≤ –Ω–∞—à—É —Å—Ö–µ–º—É –≤—Å–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —á–∞—Å—Ç–∏. –í–æ–∑—å–º—ë–º —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π –ø—Ä–∏–º–µ—Ä:

```jsx
function main() {
  setTimeout(function greet() {
    console.log("–ü—Ä–∏–≤–µ—Ç!");
  }, 2000);

  console.log("–ü–æ–∫–∞!");
}

main();
```

–ù–æ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –±—É–¥–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ ‚Äî —Ç–∞–∫–∂–µ –º—ã –≤–∫–ª—é—á–∏–º **Web API** –∏ **–æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á**, –∫–æ—Ç–æ—Ä—É—é Web API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å.

<img src="./img.png" width=500 />

- –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π, –ø–æ–¥–ª–µ–∂–∞—â–∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç **–æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π**. –ö–æ–≥–¥–∞ —Å—Ç–µ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è, –¥–≤–∏–∂–æ–∫ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏. –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ **event loop**.

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –Ω–∞—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —Å —É—á–µ—Ç–æ–º Web Api –∏ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–±—ã—Ç–∏–π:

1. –í—ã–∑–æ–≤ `main`:

| –°—Ç–µ–∫ | Web API | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ---- | ------- | ------------- |
| main |         |               |

2. –í—ã–∑–æ–≤ `setTimeout`:

| –°—Ç–µ–∫       | Web API | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ---------- | ------- | ------------- |
| setTimeout |         |               |
| main       |         |               |

üí° –ö–æ–≥–¥–∞ `setTimeout` –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Å—Ç–µ–∫–∞, –æ–Ω –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –≤–∏–¥–∏–º–æ—Å—Ç—å **Web API**, –≥–¥–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `greet`, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã:

| –°—Ç–µ–∫ | Web API           | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ---- | ----------------- | ------------- |
| main | setTimeout(greet) |               |

3. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—ã–∑–æ–≤ –∫–æ–Ω—Å–æ–ª–∏ console.log("–ü–æ–∫–∞!"). –í **Web API** –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `setTimeout(greet)`. –û–Ω–∞ –±—É–¥–µ—Ç —Ç–∞–º –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–π–¥—ë—Ç 2 —Å–µ–∫—É–Ω–¥—ã:

| –°—Ç–µ–∫        | Web API           | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ----------- | ----------------- | ------------- |
| console.log | setTimeout(greet) |               |
| main        |                   |               |

4. –û—Ç—Ä–∞–±–æ—Ç–∞–ª `console.log`, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ `main`:

| –°—Ç–µ–∫ | Web API           | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ---- | ----------------- | ------------- |
| main | setTimeout(greet) |               |

5. `main` –æ—Ç—Ä–∞–±–æ—Ç–∞–ª, —Å—Ç–µ–∫ –ø—É—Å—Ç. 2 —Å–µ–∫—É–Ω–¥—ã –µ—â—ë –Ω–µ –ø—Ä–æ—à–ª–æ, –ø–æ—ç—Ç–æ–º—É `setTimeout(greet)` –≤—Å–µ –µ—â—ë –≤ Web API:

| –°—Ç–µ–∫ | Web API           | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ---- | ----------------- | ------------- |
|      | setTimeout(greet) |               |

6. –ù–∞–∫–æ–Ω–µ—Ü, 2 —Å–µ–∫—É–Ω–¥—ã –ø—Ä–æ—à–ª–∏ - —Ñ—É–Ω–∫—Ü–∏—è `greet` –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á:

| –°—Ç–µ–∫ | Web API | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ---- | ------- | ------------- |
|      |         | greet         |

7. –¢–µ–ø–µ—Ä—å —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é greet –∏–∑ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á –≤ –≤—ã–∑–æ–≤:

| –°—Ç–µ–∫  | Web API | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ----- | ------- | ------------- |
| greet |         |               |

8. –ó–∞—Ç–µ–º –≤—ã–∑–æ–≤ `console.log("–ü—Ä–∏–≤–µ—Ç!")`:

| –°—Ç–µ–∫        | Web API | –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á |
| ----------- | ------- | ------------- |
| console.log |         |               |
| greet       |         |               |

–ò –Ω–∞–∫–æ–Ω–µ—Ü —Å—Ç–µ–∫ –ø—É—Å—Ç.

–ó–∞–º–µ—Ç—å—Ç–µ, —á—Ç–æ —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ –∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –∏–º–µ–Ω–Ω–æ —Å—Ç–µ–∫–æ–º –∏ –æ—á–µ—Ä–µ–¥—å—é. –ü–æ—Ç–æ–º—É —á—Ç–æ –≤—ã–∑–æ–≤—ã –∏–∑ —Å—Ç–µ–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞—à—ë–ª, –ø–µ—Ä–≤—ã–π –≤—ã—à–µ–ª¬ª (LIFO: last in, first out), –∞ –≤ –æ—á–µ—Ä–µ–¥–∏ ‚Äî –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–ø–µ—Ä–≤—ã–π –∑–∞—à—ë–ª, –ø–µ—Ä–≤—ã–π –≤—ã—à–µ–ª¬ª (FIFO: first in, first out).

<pre>
<code>
üí° –ü—Ä–æ Event Loop –Ω–∞ MDN <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/EventLoop">—Ç—É—Ç</a>.
</code>
</pre>

<pre>
<code>
üí° –ü—Ä–æ Event Loop –Ω–∞ –¥–æ–∫–µ <a href="https://doka.guide/js/async-in-js/#cikl-sobytiy">—Ç—É—Ç</a>.
</code>
</pre>

[–¢–µ—Å—Ç](./test-1.md)
